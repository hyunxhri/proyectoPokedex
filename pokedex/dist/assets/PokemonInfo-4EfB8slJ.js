import{_ as B,a as f,L as x,R as b,c as h,b as p,d as e,t as n,i as d,e as _,n as y,f as r,w as P,F as w,r as k,o as m,p as v,g as C}from"./index-Bv-oI6JQ.js";import{R as T}from"./RightButtons-PgbPVb6b.js";async function N(o){try{const s=await fetch(`http://localhost:8080/api/pokemons/${o}`);if(!s.ok)throw new Error(`Failed to fetch Pokemon with id: ${o}`);return await s.json()}catch(s){throw new Error(`Error fetching Pokemon with id: ${o}`,s)}}const L={data(){return{pokemonId:null,pokemon:null,imgShiny:!1,captured:!1,isCapturedMessage:""}},created(){this.pokemonId=parseInt(this.$route.params.id),this.fetchPokemon()},methods:{fetchPokemon(){this.imgShiny=!1,N(this.pokemonId).then(o=>{this.pokemon=o,this.isPokemonCaptured()}).catch(o=>{console.error("Error fetching Pokemon:",o)})},fetchNextPage(){this.pokemonId<500?this.pokemonId++:this.pokemonId=1,this.isCapturedMessage="",this.$router.push({path:`/pokedex/${this.pokemonId}`}),this.fetchPokemon()},fetchPrevPage(){this.pokemonId>1?this.pokemonId--:this.pokemonId=500,this.isCapturedMessage="",this.$router.push({path:`/pokedex/${this.pokemonId}`}),this.fetchPokemon()},getPokemonTypeBackground(){if(this.pokemon)return`background-color: var(--${this.pokemon.type})`},getPokemonType2Background(){if(this.pokemon)return`background-color: var(--${this.pokemon.type2})`},changeImgToShiny(){this.imgShiny=!this.imgShiny},addPokemonToTeam(){const o=JSON.parse(localStorage.getItem("auth")).user.token;f.put(`http://localhost:8080/api/pokedex/pokemons/${this.pokemonId}`,{favorite:!0},{headers:{Authorization:`Bearer ${o}`}}).then(()=>this.isCapturedMessage="Pokemon added to team!").catch(s=>{console.error("Error adding Pokemon to team:",s)})},async isPokemonCaptured(){const o=JSON.parse(localStorage.getItem("auth"));if(!o||!o.user||!o.user.token)throw new Error("No se encontró un token de autenticación");const s=o.user.token;try{const l=(await f.get("http://localhost:8080/api/pokedex",{headers:{Authorization:`Bearer ${s}`}})).data.pokedexPokemon.find(t=>t.pokemonId===this.pokemonId);this.captured=!!l}catch(a){throw console.error("Error fetching captured Pokemon:",a),a}}},components:{LeftBar:x,RightButtons:T,RouterLink:b}},c=o=>(v("data-v-fdc726c7"),o=o(),C(),o),E={class:"screen"},R={class:"screen__background"},A={class:"screen__infoPokemon"},M={class:"screen__pokemonId"},z=["src"],V={class:"screen__typeList"},D={class:"screen__right-side"},F={class:"screen__stadistics"},J={class:"screen__stadistics--li"},O=c(()=>e("h3",null,"Hp",-1)),W={class:"screen__stadistics--li"},j=c(()=>e("h3",null,"Attack",-1)),H={class:"screen__stadistics--li"},q=c(()=>e("h3",null,"Defense",-1)),G={class:"screen__stadistics--li"},K=c(()=>e("h3",null,"S-Attack",-1)),Q={class:"screen__stadistics--li"},U=c(()=>e("h3",null,"S-Defense",-1)),X={class:"screen__stadistics--li"},Y=c(()=>e("h3",null,"Speed",-1)),Z={key:0,class:"screen__capturedText"},$=["disabled"],ee={class:"screen__buttons"},oe=c(()=>e("button",{class:"screen__buttons--button"},"Search",-1)),te=c(()=>e("button",{class:"screen__buttons--button"},"Profile",-1));function se(o,s,a,l,t,i){const I=k("LeftBar"),u=k("RouterLink"),S=k("RightButtons");return m(),h(w,null,[p(I),e("article",E,[e("div",R,[e("section",A,[e("h2",M,n(t.pokemonId),1),e("h1",{class:"screen__pokemonName",style:d(i.getPokemonTypeBackground())},n(t.pokemon?this.pokemon.name:""),5),t.pokemon?(m(),h("img",{key:0,class:"screen__img",src:t.imgShiny?this.pokemon.imgShiny:this.pokemon.img,alt:"pokemon_img"},null,8,z)):_("",!0),e("ul",V,[e("li",{class:y(["screen__typeList--type",{fullWidth:t.pokemon&&!t.pokemon.type2}]),style:d(i.getPokemonTypeBackground())},n(t.pokemon?this.pokemon.type:""),7),t.pokemon&&this.pokemon.type2?(m(),h("li",{key:0,class:y(["screen__typeList--type",{fullWidth:!t.pokemon.type2}]),style:d(i.getPokemonType2Background())},n(this.pokemon.type2),7)):_("",!0)]),e("button",{class:"screen__shinyButton",onClick:s[0]||(s[0]=(...g)=>i.changeImgToShiny&&i.changeImgToShiny(...g))},"Shiny")]),e("div",D,[e("ul",F,[e("li",J,[O,r(" "+n(t.pokemon?this.pokemon.hp:""),1)]),e("li",W,[j,r(" "+n(t.pokemon?this.pokemon.attack:""),1)]),e("li",H,[q,r(" "+n(t.pokemon?this.pokemon.defense:""),1)]),e("li",G,[K,r(" "+n(t.pokemon?this.pokemon.sattack:""),1)]),e("li",Q,[U,r(" "+n(t.pokemon?this.pokemon.sdefense:""),1)]),e("li",X,[Y,r(" "+n(t.pokemon?this.pokemon.speed:""),1)])]),i.isPokemonCaptured()?(m(),h("h2",Z,n(t.isCapturedMessage),1)):_("",!0),e("button",{class:"screen__capturedButton",onClick:s[1]||(s[1]=g=>i.addPokemonToTeam()),disabled:!t.captured},"Add to team",8,$)])]),e("div",ee,[p(u,{to:"/explore"},{default:P(()=>[oe]),_:1}),p(u,{to:"/profile"},{default:P(()=>[te]),_:1})])]),p(S,{onNextPage:i.fetchNextPage,onPrevPage:i.fetchPrevPage},null,8,["onNextPage","onPrevPage"])],64)}const ce=B(L,[["render",se],["__scopeId","data-v-fdc726c7"]]);export{ce as default};
